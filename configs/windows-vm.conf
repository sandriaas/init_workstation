# Windows 11 VM Configuration (Example)
# Requires virtio-win drivers ISO for installation

# ── Identity ──────────────────────────────────────────────────────────────────
VM_NAME="windows-11"
VM_HOSTNAME="win11"
VM_USER="User"
# No cloud-init for Windows, password set during install
VM_PASSWORD_HASH=""

# ── Machine / Firmware ────────────────────────────────────────────────────────
VM_MACHINE_TYPE="q35"
VM_FIRMWARE="uefi"
VM_CPU_MODEL="host-passthrough"
VM_VCPUS="4"
VM_RAM_MB="8192"

# ── Storage ───────────────────────────────────────────────────────────────────
# Windows needs ~64GB+
VM_DISK_SIZE_GB="64"
VM_DISK_BUS="virtio"
VM_DISK_CACHE="none"
VM_DISK_FORMAT="qcow2"

# ── ISOs ──────────────────────────────────────────────────────────────────────
# Main installer ISO
VM_ISO_PATH="/var/lib/libvirt/images/Win11_23H2_English_x64v2.iso"
# VirtIO drivers (required for net/disk)
VM_EXTRA_ISO="/var/lib/libvirt/images/virtio-win-0.1.240.iso"

# ── Network ───────────────────────────────────────────────────────────────────
VM_NET_TYPE="network"
VM_NET_SOURCE="default"
VM_NET_MODEL="virtio"  # Requires driver from virtio-win ISO
VM_STATIC_IP="192.168.122.150/24"
VM_GATEWAY="192.168.122.1"
VM_DNS="1.1.1.1,8.8.8.8"

# ── Display / Console ─────────────────────────────────────────────────────────
# RDP is better for Windows, but spice/vnc works for install
VM_GRAPHICS="spice"
VM_VIDEO="qxl"
VM_CONSOLE="pty,target_type=serial"

# ── GPU / SR-IOV Passthrough ──────────────────────────────────────────────────
GPU_PASSTHROUGH="yes"
GPU_GEN="9"
# Use VF #2 (00:02.2) for Windows (VF #1 is usually for primary Linux VM)
GPU_PCI_ID="0000:00:02.2"
GPU_VF_COUNT="2"
GPU_DRIVER="i915"
# Windows driver installation required inside VM (Intel Arc/Iris Xe Graphics)
