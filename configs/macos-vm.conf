# macOS Sequoia VM Configuration (Example)
# Requires OpenCore bootloader + macOS installer script (see Phase 11 guide)
# Based on OSX-KVM / Docker-OSX

# ── Identity ──────────────────────────────────────────────────────────────────
VM_NAME="macos-sequoia"
VM_HOSTNAME="mac-mini"
VM_USER="admin"

# ── Machine / Firmware ────────────────────────────────────────────────────────
VM_MACHINE_TYPE="q35"
# macOS requires specific OVMF vars (often separate from system OVMF)
VM_FIRMWARE="uefi"
VM_CPU_MODEL="Penryn,vendor=GenuineIntel,+invtsc,kvm=on,vmware-cpuid-freq=on"
VM_VCPUS="4"
VM_RAM_MB="16384"

# ── Storage ───────────────────────────────────────────────────────────────────
VM_DISK_SIZE_GB="128"
VM_DISK_BUS="virtio"
VM_DISK_CACHE="none"
VM_DISK_FORMAT="qcow2"

# ── ISOs ──────────────────────────────────────────────────────────────────────
# OpenCore bootloader image
VM_ISO_PATH="/var/lib/libvirt/images/OpenCore.qcow2"
# macOS BaseSystem / Recovery / Installer
VM_EXTRA_ISO="/var/lib/libvirt/images/BaseSystem.img"

# ── Network ───────────────────────────────────────────────────────────────────
VM_NET_TYPE="network"
VM_NET_SOURCE="default"
VM_NET_MODEL="virtio" # macOS supports virtio-net
VM_STATIC_IP="192.168.122.160/24"
VM_GATEWAY="192.168.122.1"
VM_DNS="1.1.1.1,8.8.8.8"

# ── Display / Console ─────────────────────────────────────────────────────────
VM_GRAPHICS="vnc"
VM_VIDEO="virtio"

# ── GPU / SR-IOV Passthrough ──────────────────────────────────────────────────
# macOS DOES NOT support Intel iGPU SR-IOV (no drivers for Iris Xe / UHD 770)
# It only supports AMD Radeon (RX 400/500/5000/6000 series) natively.
GPU_PASSTHROUGH="no"
GPU_GEN="9"
GPU_PCI_ID=""
GPU_VF_COUNT="2"
GPU_DRIVER="i915"
