# Generated by scripts/phase2.sh — mirrors Cockpit/virt-install VM definition

# ── Identity ──────────────────────────────────────────────────────────────────
VM_NAME="vm_1"
VM_HOSTNAME="ubuntu-server"
VM_USER="sandriaas"
# SHA-512 hash of VM user password (used by Ubuntu autoinstall — never store plaintext)
VM_PASSWORD_HASH="$6$C9b0.RURynazAH6w$djY1wOyW.bdYqiG/y24fw/MYFSqNYW8JO///b9vI84sov2D7NOKh9GsvarJKjWt18AMv9Ge9zKAQFskldTrwG0"

# ── Machine / Firmware ────────────────────────────────────────────────────────
# machine: q35 (PCIe) is modern default; use pc (i440fx) only for legacy IGD passthrough
VM_MACHINE_TYPE="q35"
# firmware: uefi (OVMF) or bios
VM_FIRMWARE="uefi"
# cpu: host-passthrough exposes all host CPU features to guest
VM_CPU_MODEL="host-passthrough"

# ── Resources ─────────────────────────────────────────────────────────────────
VM_RAM_MB="4096"
VM_VCPUS="4"

# ── Disk ──────────────────────────────────────────────────────────────────────
VM_DISK_GB="32"
VM_DISK_PATH="/var/lib/libvirt/images/vm_1.qcow2"
VM_DISK_FORMAT="qcow2"
VM_DISK_BUS="virtio"

# ── OS ────────────────────────────────────────────────────────────────────────
VM_OS_VARIANT="ubuntu24.04"
VM_ISO_PATH="/home/sandriaas/iso/ubuntu-24.04.3-live-server-amd64.iso"
VM_ISO_URL="https://releases.ubuntu.com/24.04.3/ubuntu-24.04.3-live-server-amd64.iso"
VM_ISO_SHA256_URL="https://releases.ubuntu.com/24.04.3/SHA256SUMS"
VM_CLOUD_IMG_URL="https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img"
VM_CLOUD_IMG_PATH="/home/sandriaas/iso/noble-server-cloudimg-amd64.img"
VM_BOOT_ORDER="hd,cdrom"
# Autoinstall: yes = cloud-init autoinstall (fully unattended), no = manual
VM_AUTOINSTALL="yes"
VM_SEED_ISO="/home/sandriaas/_projects/minipc/generated-vm/vm_1-seed.iso"

# ── Network ───────────────────────────────────────────────────────────────────
VM_NET_TYPE="network"
VM_NET_SOURCE="default"
VM_NET_MODEL="virtio"
VM_NET_IFACE="enp1s0"
VM_STATIC_IP="192.168.122.50/24"
VM_GATEWAY="192.168.122.1"
VM_DNS="1.1.1.1,8.8.8.8"
VM_SSH_PORT="22"

# ── Display / Console ─────────────────────────────────────────────────────────
# Headless passthrough: no graphics, no video, serial console only
VM_GRAPHICS="none"
VM_VIDEO="none"
VM_CONSOLE="pty,target_type=serial"

# ── Features ──────────────────────────────────────────────────────────────────
VM_FEATURES="acpi,apic"
VM_CLOCK="utc"
VM_AUTOSTART="yes"

# ── Shared Storage ────────────────────────────────────────────────────────────
SHARED_DIR="/home/sandriaas/server-data"
SHARED_TAG="hostshare"

# ── GPU / SR-IOV Passthrough ──────────────────────────────────────────────────
GPU_PASSTHROUGH="yes"
GPU_GEN="9"
GPU_PCI_ID="0000:00:02.0"
GPU_VF_COUNT="2"
GPU_DRIVER="i915"
GPU_ROM_FILE="ADL-H_RPL-H_GOPv21_igd.rom"
GPU_ROM_URL="https://github.com/LongQT-sea/intel-igpu-passthru/releases/download/v0.1/ADL-H_RPL-H_GOPv21_igd.rom"
GPU_ROM_PATH="/usr/share/kvm/igd.rom"
GPU_IGD_LPC="yes"
KERNEL_GPU_ARGS="i915.enable_guc=3 i915.max_vfs=7 module_blacklist=xe"

# ── Cloudflare Tunnel ─────────────────────────────────────────────────────────
HOST_TUNNEL_DOMAIN="easyrentbali.com"
HOST_TUNNEL_HOST="b8sqa0n0v48o.easyrentbali.com"
HOST_TUNNEL_NAME=""
HOST_TUNNEL_ID="62e14bed-9dcc-4c39-80d3-a4bcf257b466"
VM_TUNNEL_NAME="vm_1-ssh"
VM_TUNNEL_HOST="vm1-ssh.easyrentbali.com"
